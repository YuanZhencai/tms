<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<div class="style1">
		<h:panelGrid columns="8" id="debtSearchPanel"
			columnClasses="column0,column2,column0,column2,column0,column2,column0,column2">

			<h:outputLabel value="#{msgs.lab_debtTime}：" />
			<h:panelGroup>
				<p:inputText id="startDateS"
					value="#{debtBorrowManagerBean.conditionMap['startDateS']}"
					styleClass="ui-date" style="font-size: 12px;width:90px;"
					title="#{msgs.txt_startTime}"
					onfocus="javascript:WdatePicker({dateFmt:'yyyy-MM',maxDate:'#F{$dp.$D(\'capitalDebtTabView:startDateE\')}',autoUpdateOnChanged:false});">
					<f:convertDateTime pattern="yyyy-MM" timeZone="GMT+8" />
				</p:inputText>
				<h:outputText value="~" />
				<p:inputText id="startDateE"
					value="#{debtBorrowManagerBean.conditionMap['startDateE']}"
					styleClass="ui-date" style="font-size: 12px;width:90px;"
					title="#{msgs.txt_endTime}"
					onfocus="javascript:WdatePicker({dateFmt:'yyyy-MM',minDate:'#F{$dp.$D(\'capitalDebtTabView:startDateS\')}',autoUpdateOnChanged:false});">
					<f:convertDateTime pattern="yyyy-MM" timeZone="GMT+8" />
				</p:inputText>
			</h:panelGroup>
			<h:outputLabel value="还款时间：" />
			<h:panelGroup>
				<p:inputText id="endDateS"
					value="#{debtBorrowManagerBean.conditionMap['endDateS']}"
					styleClass="ui-date" style="font-size: 12px;width:90px;"
					title="#{msgs.txt_startTime}"
					onfocus="javascript:WdatePicker({dateFmt:'yyyy-MM',maxDate:'#F{$dp.$D(\'endDateE\')}',autoUpdateOnChanged:false});">
					<f:convertDateTime pattern="yyyy-MM" timeZone="GMT+8" />
				</p:inputText>
				<h:outputText value="~" />
				<p:inputText id="endDateE"
					value="#{debtBorrowManagerBean.conditionMap['endDateE']}"
					styleClass="ui-date" style="font-size: 12px;width:90px;"
					title="#{msgs.txt_endTime}"
					onfocus="javascript:WdatePicker({dateFmt:'yyyy-MM',minDate:'#F{$dp.$D(\'endDateS\')}',autoUpdateOnChanged:false});">
					<f:convertDateTime pattern="yyyy-MM" timeZone="GMT+8" />
				</p:inputText>
			</h:panelGroup>

			<h:outputLabel value="#{msgs.col_companyName}："
				rendered="#{!debtBorrowManagerBean.isCopUser}" />
			<h:panelGroup rendered="#{!debtBorrowManagerBean.isCopUser}">
				<h:selectOneMenu id="debtCompanyName" name="companyName"
					style="width:330px;"
					value="#{debtBorrowManagerBean.conditionMap['companyId']}"
					styleClass="ui-inputfield ui-widget ui-state-default ui-corner-all">
					<f:selectItem itemLabel="#{msgs.txt_pleaseSelect}" itemValue="" />
					<f:selectItems value="#{debtBorrowManagerBean.companySelect}" />
				</h:selectOneMenu>
			</h:panelGroup>

			<h:outputLabel value="#{msgs.col_companyName}："
				rendered="#{debtBorrowManagerBean.isCopUser}" />
			<h:panelGroup rendered="#{debtBorrowManagerBean.isCopUser}">
				<p:inputText id="debtCompanyNameTwo" disabled="true"
					style="width: 320px;"
					value="#{debtBorrowManagerBean.company.companyName}" />
			</h:panelGroup>
			<p:commandButton immediate="true" value="#{msgs.btn_select}"
				style="width: 70px;" image="ui-icon ui-icon-zoomin"
				rendered="#{debtBorrowManagerBean.isCopUser}"
				actionListener="#{debtBorrowManagerBean.clear}"
				oncomplete="companyDialogVar.show();" update="companyForm">
				<f:setPropertyActionListener
					target="#{debtBorrowManagerBean.companySelectBean.method}"
					value="debtBorrowManagerBean.getSelectedCompany" />
			</p:commandButton>

		</h:panelGrid>
		<div>
			<p:commandButton 
				action="#{debtBorrowManagerBean.searchDebtBorrow}"
				update="doneMsg,debtBorrowReportPl" value="#{msgs.btn_query}"
				image="ui-icon ui-icon-search" />
			<p:commandButton value="#{msgs.btn_reset}" style="margin: 5px;"
				icon="ui-icon ui-icon-arrowrefresh-1-e"
				action="#{debtBorrowManagerBean.reset}"
				update="debtSearchPanel,debtCompanyName,debtCompanyNameTwo" />
		</div>
	</div>
	<br />

	<p:outputPanel id="debtBorrowReportPl">
		<p:dataTable var="procDebtBorrow" id="debtBorrowReports"
			value="#{debtBorrowManagerBean.debtBorrowRequestVOModel}"
			rowKey="#{procDebtBorrow.id}" emptyMessage="#{msgs.dataTable_empty}">

			<f:facet name="header">#{msgs.menItem_extDebtBorForm}</f:facet>


			<p:column headerText="#{msgs.col_procInstId}">
				<h:outputText value="#{procDebtBorrow.procInstId}" />
			</p:column>

			<p:column headerText="#{msgs.col_companyName}">
				<h:outputText value="#{procDebtBorrow.company.companyName}" />
			</p:column>

			<p:column headerText="#{msgs.col_debtProviderName}">
				<h:outputText value="#{procDebtBorrow.providerName}" />
			</p:column>

			<p:column headerText="#{msgs.col_debtCurrency}">
				<h:outputText
					value="#{commonBean.getValueByDictCatAndKey('TMS_TAX_PROJECT_CURRENCY_TYPE',procDebtBorrow.corpAuditCu)}" />
			</p:column>

			<p:column headerText="#{msgs.col_debtAmount}">
				<h:outputText value="#{procDebtBorrow.corpAudit}">
					<f:convertNumber pattern="#,##0.####" />
				</h:outputText>
			</p:column>

			<p:column headerText="#{msgs.col_debtTime}">
				<h:outputText value="#{procDebtBorrow.corpAuditLis}">
					<f:convertDateTime timeZone="GMT+8" pattern="yyyy-MM" />
				</h:outputText>
			</p:column>

			<p:column headerText="#{msgs.col_refuntTime}">
				<h:outputText value="#{procDebtBorrow.corpAuditLie}">
					<f:convertDateTime timeZone="GMT+8" pattern="yyyy-MM" />
				</h:outputText>
			</p:column>

			<p:column headerText="#{msgs.col_moneyRate}">
				<h:outputText value="#{procDebtBorrow.corpAuditRa}">
					<f:convertNumber pattern="0.####" />
				</h:outputText>
			</p:column>

		</p:dataTable>
	</p:outputPanel>
</ui:composition>